<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Guitar Rookie</title>

<!-- 预加载首屏关键图片 -->
<link rel="preload" as="image" href="./src/img/avatar2.jpg">
<link rel="preload" as="image" href="./src/img/avatar.jpg">

<style>
  html {
    overflow-y: scroll;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  html::-webkit-scrollbar { display: none; }
  *{box-sizing:border-box}
  body{margin:0;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;background:#f7f7f7}
  .navbar{display:flex;align-items:center;background:#222;color:#fff;padding:8px 20px;position:sticky;top:0;z-index:100}
  .nav-avatar{width:36px;height:36px;border-radius:50%;cursor:pointer;margin-right:16px}
  .nav-item{margin-right:20px;cursor:pointer;padding:6px 12px;border-radius:4px}
  .nav-item:hover,.nav-item.active{background:#555}
  #pageContainer{min-height:calc(100vh - 52px)}
  .page{display:none;padding:20px}
  .page.active{display:block}
  .page-tag{background:#4a90e2;color:#fff;padding:4px 12px;border-radius:12px;font-size:.9rem;margin-left:10px;display:none}
  .grid-container{display:grid;grid-template-columns:repeat(6,1fr);gap:15px}
  @media(max-width:1200px){.grid-container{grid-template-columns:repeat(4,1fr)}}
  @media(max-width:900px){.grid-container{grid-template-columns:repeat(3,1fr)}}
  @media(max-width:600px){.grid-container{grid-template-columns:repeat(2,1fr)}}
  @media(max-width:400px){.grid-container{grid-template-columns:1fr}}
  .grid-item{position:relative;cursor:pointer;border-radius:8px;overflow:hidden;box-shadow:0 0 6px rgba(0,0,0,.1);background:#fff;transition:transform .2s}
  .grid-item:hover{transform:scale(1.05)}
  .grid-item img{width:100%;height:auto;display:block}
  .overlay{position:absolute;bottom:0;background:rgba(0,0,0,.7);color:#fff;width:100%;padding:10px;opacity:0;transition:opacity .3s;font-size:.9rem}
  .grid-item:hover .overlay{opacity:1}
  #externalFrame{width:100%;height:calc(100vh - 52px);border:none}
</style>
</head>
<body>

<!-- ===== 固定导航 ===== -->
<div class="navbar">
  <img class="nav-avatar" id="avatar" src="./src/img/avatar2.jpg" alt="头像"/>
  <div class="nav-item active" data-page="app">APPs</div>
  <div class="nav-item" data-page="intro">简介</div>
  <span id="pageTag" class="page-tag"></span>
</div>

<!-- ===== 页面容器 ===== -->
<div id="pageContainer">
  <div id="app" class="page active">
    <div class="grid-container" id="gridApp"></div>
  </div>

  <div id="intro" class="page">
    <div style="max-width:600px;margin:0 auto;background:#fff;border-radius:10px;padding:30px;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,.1)">
      <img src="./src/img/avatar.jpg" loading="lazy"
           style="width:150px;height:150px;border-radius:50%;object-fit:cover;margin-bottom:20px;border:3px solid #4a90e2" alt="头像"/>
      <h1 style="margin:0 0 10px;font-weight:700">Guitar Rookie</h1>
      <p style="font-size:1.1rem;color:#555;line-height:1.6">
        大家好，我是Guitar Rookie，喜欢<b>唱、跳、Rap、篮球</b>。<br>
        希望未来不断提升自己，成为一名优秀的普通人。<br>
        工具部分根据自己需求写的，部分整合自网络。<br>
        <b>🌸🌸使用愉快🌸🌸</b>
      </p>

      <img src="./src/img/wechatPay.jpg" loading="lazy" id="wechatImg"
           style="width:150px;height:150px;border-radius:8px;object-fit:cover;margin-top:20px;cursor:pointer"
           alt="真的是你呀~" title="你真的很美丽~"/>

      <audio id="hoverSound" preload="auto">
        <source src="./src/sound/音效.mp3" type="audio/mpeg">
        您的浏览器不支持音频播放。
      </audio>
    </div>
  </div>

  <div id="external" class="page">
    <iframe id="externalFrame" src=""></iframe>
  </div>
</div>

<script defer>
document.addEventListener('DOMContentLoaded', function () {
  const appData = [
    {name:'指板记忆',url:'./apps/指板记忆/指板记忆.html', img:'./apps/指板记忆/detail.png'},
    {name:'和弦组成音练习', url:'./apps/和弦组成音/组成音.html', img:'./apps/和弦组成音/detail.png'},
    {name:'和弦指法库', url:'./apps/和弦指型合集/和弦指法库.html', img:'./apps/和弦指型合集/detail.png'},
    {name:'指板音程音名练习', url:'./apps/指板音程记忆/指板音程记忆.html', img:'./apps/指板音程记忆/detail.png'},
    {name:'和弦识别', url:'https://www.musictheory.net/exercises/fretboard-chord', img:'./apps/和弦识别/detail.png'},
    {name:'chords progression', url:'./apps/chords_progression/chord_progression.html', img:'./apps/chords_progression/detail.png'},
    {name:'random rhythm generator', url:'https://randomrhythmgenerator.com/',img:'./apps/random_rhythm_generator/detail.png'},
    {name:'ear training--musicacademy', url:'https://musicacademy.app/zh/', img:'./apps/ear_training/detail.png'}

  ];

  function switchPage(pageId,title=''){
    document.querySelectorAll('#pageContainer .page').forEach(p=>p.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
    const tag=document.getElementById('pageTag');
    if(pageId==='app'||pageId==='intro'){
      document.getElementById(pageId).classList.add('active');
      document.querySelector(`.nav-item[data-page="${pageId}"]`).classList.add('active');
      tag.style.display='none'; tag.textContent='';
    }else if(pageId==='external'){
      document.getElementById('external').classList.add('active');
      document.getElementById('externalFrame').src=appData.find(a=>a.name===title)?.url||'';
      tag.textContent=title; tag.style.display='inline-block';
    }
  }

  function generateAppGrid(){
    const container=document.getElementById('gridApp');
    container.innerHTML='';
    appData.forEach(item=>{
      const div=document.createElement('div');
      div.className='grid-item';
      const picSrc = item.img || `https://picsum.photos/300/200?random=${Math.random()}`;
      div.innerHTML=`
        <img src="${picSrc}" loading="lazy" alt="${item.name}"/>
        <div class="overlay">${item.name}</div>`;
      div.onclick=()=>switchPage('external',item.name);
      container.appendChild(div);
    });
  }

  document.getElementById('avatar').addEventListener('click',()=>switchPage('app'));
  document.querySelectorAll('.nav-item').forEach(nav=>{
    nav.addEventListener('click',()=>switchPage(nav.dataset.page));
  });

  const wechatImg = document.getElementById('wechatImg');
  const hoverSound = document.getElementById('hoverSound');
  wechatImg.addEventListener('mouseenter', () => {
    hoverSound.currentTime = 0;
    hoverSound.play().catch(() => {
      console.warn('播放被阻止，用户需先交互页面。');
    });
  });

  generateAppGrid();
});
</script>
</body>
</html>
